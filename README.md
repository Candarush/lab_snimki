## Лабораторная работа по дисциплине информационные системы аэрокосмических комплексов
### Акимов В.Н. M30-312Б-18

#Лабораторная работа №1.

Задание лабораторной работы: https://gist.github.com/ilyashatalov/08f28665645a8e8709f1ed51fdc00791

Главный исполняемый файл - main.py, внутри комментарии ко всем функциям.
Файл city_data.xml генерируется автоматически при выполнении программы.

Принцип работы:
1. На координатной плоскости широты и долготы откладываем два отрезка из COORD_UL к точке COORD_UR и COORD_LL.
2. Откладываем от заданной точки города вертикальную прямую к первому отрезку параллельно ко второму и ко второму парралельно к первому (строим крест).
3. Находим отношение длины отсеченных относительно точки COORD_UL отрезов ко всей длинне этих отрезков.
4. Откладываем эти же отношения на плоскости пиксельного изображения на сторонах заданного прямоугольника изображения снимка.
5. Из точки на верхней стороне прямоугольника откладываем прямую параллельно левой стороне прямоугольника и 
   из точки на левой стороне прямоугольника вторую прямую параллельно верхней стороне прямоугольника (строим крест).
6. На пересечении прямых будет лежать искомая точка пикселя, соответствующая заданной широте и долготе.

В соответствиями с заданными географическими координатами отмечаем прямоуголник и выделяем его в ч/б маску. Затем вырезаем новую картинку по маске. Результирующее изображение представляет из себя вырезанный прямоугольник города.

#Лабораторная работа №2.

Задание лабораторной работы: https://gist.github.com/ilyashatalov/5c6d8d24222c8fb07a7921dda109c8ea

Принцип работы:
1. Открываем картинки с band'ами 3 и 4. Картинки представляют диапазоны длин волн: Band 3 = [0.63,0.69], Band 4 = [0.76,0.90], однако имеют значения uint8 - значения яркости от 0 до 255. Чтобы перевести значения пикселей в яркости отражения необходимо применить формулу: r = (gain * DN) + bias, где 
r - коэффициент отражения,
gain и bias - специальные параметры, определенные для сенсоров Landsat 7, 
DN - значение пикселя.
Источник: https://www.researchgate.net/publication/258831794_TOA_reflectance_and_NDVI_calculation_for_Landsat_7_ETM_images_of_Sicily
Применим формулу к матрицам band3 и band4.
2. Чтобы получить матрицу значний NDVI применим к полученным картинкам формулу: NDVI = (Pnir - Pir)/(Pnir + Pir). Результирующая матрица будет иметь диапазон значений [-1,1].
3. Для применения цветового градиента прибавим к матрице единицу и разделим на 2, чтобы перейти от диапазона [-1,1] к диапазону [0,1].
Домножим получвшуюся матрицу на 255 чтобы получить значения пикселей. Применим функцию LUT, которая дает значениям пикселей одной картинки значения пикселей другой, которая представляет собой изображение размера 256x1 - в нашем случае, цветовой градиент.